<h1 class="text-center">Dashboard</h1>
<div class="wrapper">
  <div class="w-11/12 mx-auto animate__animated text-center animate__fadeIn " >
    <h2>Siguientes 5 reparaciones</h2>
    <table class="mt-5" mat-table [dataSource]="nextReparaciones" matSort>

      <ng-container matColumnDef="averia">
        <th class="clase" mat-header-cell *matHeaderCellDef mat-sort-header> Avería </th>
        <td mat-cell *matCellDef="let element"> {{element.averia}} </td>
      </ng-container>

      <ng-container matColumnDef="estado">
        <th class="clase" mat-header-cell *matHeaderCellDef mat-sort-header> Estado </th>
        <td mat-cell *matCellDef="let element"> {{element.estado}} </td>
      </ng-container>

      <ng-container matColumnDef="fecha_creacion">
        <th class="clase" mat-header-cell *matHeaderCellDef mat-sort-header> Fecha creación </th>
        <td mat-cell *matCellDef="let element"> {{element.fecha_creacion}} </td>
      </ng-container>

      <ng-container matColumnDef="fecha_compromiso">
        <th class="clase" mat-header-cell *matHeaderCellDef mat-sort-header> Fecha compromiso </th>
        <td mat-cell *matCellDef="let element"> {{element.fecha_compromiso}} </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="columnsNextReparaciones"></tr>
      <tr mat-row *matRowDef="let row; columns: columnsNextReparaciones;"></tr>
    </table>
  </div>
  <div class="w-11/12 mx-auto animate__animated text-center animate__fadeIn" >
    <h2>Artículos más usados en reparaciones</h2>
    <table class="mt-5" mat-table [dataSource]="countArts" matSort>

      <ng-container matColumnDef="count">
        <th class="clase" mat-header-cell *matHeaderCellDef mat-sort-header> Número de reparaciones con el artículo </th>
        <td mat-cell *matCellDef="let element"> {{element.count}} </td>
      </ng-container>

      <ng-container matColumnDef="descripcion">
        <th class="clase" mat-header-cell *matHeaderCellDef mat-sort-header> Descripción </th>
        <td mat-cell *matCellDef="let element"> {{element.descripcion}} </td>
      </ng-container>

      <ng-container matColumnDef="precio_venta">
        <th class="clase" mat-header-cell *matHeaderCellDef mat-sort-header>Precio de venta </th>
        <td mat-cell *matCellDef="let element"> {{element.precio_venta}} </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="columnsCountArts"></tr>
      <tr mat-row *matRowDef="let row; columns: columnsCountArts;"></tr>
    </table>
  </div>
  <div class="w-11/12 mx-auto animate__animated text-center animate__fadeIn " >
    <h2>Artículos ordenados por precio</h2>
    <table class="mt-5" mat-table [dataSource]="articulosOrder" matSort>

      <ng-container matColumnDef="categoria">
        <th class="clase" mat-header-cell *matHeaderCellDef mat-sort-header> Categoría </th>
        <td mat-cell *matCellDef="let element"> {{element.categoria}} </td>
      </ng-container>

      <ng-container matColumnDef="descripcion">
        <th class="clase" mat-header-cell *matHeaderCellDef mat-sort-header> Descripción </th>
        <td mat-cell *matCellDef="let element"> {{element.descripcion}} </td>
      </ng-container>

      <ng-container matColumnDef="precio_coste">
        <th class="clase" mat-header-cell *matHeaderCellDef mat-sort-header>Precio de coste </th>
        <td mat-cell *matCellDef="let element"> {{element.precio_coste}} </td>
      </ng-container>

      <ng-container matColumnDef="precio_venta">
        <th class="clase" mat-header-cell *matHeaderCellDef mat-sort-header> Precio de venta </th>
        <td mat-cell *matCellDef="let element"> {{element.precio_venta}} </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="columnsArtsOrders"></tr>
      <tr mat-row *matRowDef="let row; columns: columnsArtsOrders;"></tr>
    </table>
    <mat-paginator [pageSizeOptions]="[10, 25, 100]"></mat-paginator>
  </div>
  <div class="w-11/12 mx-auto animate__animated text-center animate__fadeIn " >
    <h2>Reparaciones por técnicos</h2>
    <table class="mt-5" mat-table [dataSource]="reparacionesTecnicos" matSort>

      <ng-container matColumnDef="nombre">
        <th class="clase" mat-header-cell *matHeaderCellDef mat-sort-header> Nombre </th>
        <td mat-cell *matCellDef="let element"> {{element.nombre}} </td>
      </ng-container>

      <ng-container matColumnDef="cantidad">
        <th class="clase" mat-header-cell *matHeaderCellDef mat-sort-header> Cantidad de reparaciones </th>
        <td mat-cell *matCellDef="let element"> {{element.cantidad}} </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="columnsTecnicos"></tr>
      <tr mat-row *matRowDef="let row; columns: columnsTecnicos;"></tr>
    </table>
    <mat-paginator [pageSizeOptions]="[10, 25, 100]"></mat-paginator>
  </div>
</div>

<ng-template #loading>
  <div class="flex justify-center w-full">
    <mat-spinner></mat-spinner>
  </div>
</ng-template>
