"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[197],{3197:(I,d,s)=>{s.r(d),s.d(d,{AuthRoutingModule:()=>T});var l=s(1083),i=s(3075),C=s(5226),p=s.n(C),m=s(9808),n=s(5e3),u=s(6518),c=s(7322),f=s(7531),h=s(7423),_=s(5245);const P=["container"];function M(e,a){if(1&e&&(n.TgZ(0,"mat-error"),n._uU(1),n.qZA()),2&e){const t=n.oxw();n.xp6(1),n.Oqu(t.errorEmail)}}function O(e,a){if(1&e&&(n.TgZ(0,"mat-error"),n._uU(1),n.qZA()),2&e){const t=n.oxw();n.xp6(1),n.Oqu(t.errorPassword)}}function x(e,a){if(1&e&&(n.TgZ(0,"mat-error"),n._uU(1),n.qZA()),2&e){const t=n.oxw(2);n.xp6(1),n.Oqu(t.errorEmail)}}function w(e,a){if(1&e){const t=n.EpF();n.TgZ(0,"form",24),n.NdJ("ngSubmit",function(){return n.CHM(t),n.oxw().sendPass()}),n.TgZ(1,"h2",5),n._uU(2,"Cambiar contrase\xf1a"),n.qZA(),n.TgZ(3,"div",6)(4,"mat-form-field",7)(5,"mat-label"),n._uU(6,"Introduce tu email"),n.qZA(),n._UZ(7,"input",25),n.YNc(8,x,2,1,"mat-error",9),n.qZA()(),n._UZ(9,"input",26),n.qZA()}if(2&e){const t=n.oxw();n.Q6J("formGroup",t.formNewPassword),n.xp6(8),n.Q6J("ngIf",t.formLogin.controls.email.invalid)}}function b(e,a){1&e&&(n.TgZ(0,"form",27)(1,"h2",5),n._uU(2,"Correo enviado correctamente."),n.qZA(),n.TgZ(3,"p"),n._uU(4,"Mira tu bandeja de entrada y punsa en el link para cambiar tu contrase\xf1a."),n.qZA()())}function Z(e,a){if(1&e&&(n.TgZ(0,"mat-error"),n._uU(1),n.qZA()),2&e){const t=n.oxw();n.xp6(1),n.Oqu(t.errorPassword)}}const y=[{path:"login",component:(()=>{class e{constructor(t,o,r,g,A){this.fb=t,this.authService=o,this.router=r,this._renderer2=g,this._document=A,this.formLogin=this.fb.group({email:["",[i.kI.required,i.kI.email,i.kI.minLength(3),i.kI.maxLength(50)]],password:["",[i.kI.required,i.kI.minLength(6)]]}),this.formNewPassword=this.fb.group({email:["",[i.kI.required,i.kI.email,i.kI.minLength(3),i.kI.maxLength(50)]]}),this.errorMsg="",this.errorEmail="Formato de email incorrecto",this.errorPassword="Debe tener al menos 6 caracteres",this.hidePassword=!0,this.correoEnviado=!1}ngOnInit(){let t=this._renderer2.createElement("script");t.src="//code.tidio.co/w1tmmcitbsntvblwkkkjd5mll2rdcixz.js",t.async=!0,this._renderer2.appendChild(this._document.body,t)}login(){const{email:t,password:o}=this.formLogin.value;this.authService.login(t,o).subscribe({next:r=>{!0===r&&this.formLogin.valid?this.authService.getRolByToken().subscribe(g=>{this.router.navigate("admin"===g?["/dashboard"]:"tecnico"===g?["/tecnico"]:["/cliente"])}):(this.errorMsg="Usuario o contrase\xf1a incorrectos",p().fire("Error",r.msg,"error"))}})}sendPass(){const{email:t}=this.formNewPassword.value;this.authService.sendEmail(t).subscribe({next:()=>{p().fire({title:"Enviado",text:"Se ha enviado un correo para restablecer la contrase\xf1a",icon:"success",showConfirmButton:!1,timer:3e3}),this.router.navigate(["/login"]),this.correoEnviado=!0},error:o=>{p().fire({title:"Error",text:"No se ha podido enviar el correo",icon:"error",confirmButtonText:"Ok"})}})}signUpMode(){this.container.nativeElement.classList.add("sign-up-mode")}signInMode(){this.container.nativeElement.classList.remove("sign-up-mode")}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(i.qu),n.Y36(u.e),n.Y36(l.F0),n.Y36(n.Qsj),n.Y36(m.K0))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-login"]],viewQuery:function(t,o){if(1&t&&n.Gf(P,5),2&t){let r;n.iGM(r=n.CRH())&&(o.container=r.first)}},decls:49,vars:10,consts:[[1,"container","w-full"],["container",""],[1,"forms-container"],[1,"signin-signup"],[1,"sign-in-form",3,"formGroup","ngSubmit"],[1,"title"],[1,"input-field"],["appearance","fill",1,"w-full"],["type","email","autocomplete","off","matInput","","placeholder","pat@example.com","formControlName","email","required","",1,"focus:ring-transparent"],[4,"ngIf"],["autocomplete","off","formControlName","password","matInput","","required","",1,"focus:ring-transparent",3,"type"],["type","button","mat-icon-button","","matSuffix","",3,"click"],[1,"text-xs","italic","text-red-500"],["type","submit","value","Iniciar sesi\xf3n",1,"btn","solid"],["class","sign-up-form",3,"formGroup","ngSubmit",4,"ngIf","ngIfElse"],[1,"panels-container"],[1,"panel","left-panel"],[1,"content"],["src","/assets/Gestirediel.png",1,"w-20","mx-auto","logo"],[1,"btn","transparent",3,"click"],["src","/assets/log.svg","alt","",1,"image"],[1,"panel","right-panel"],["src","/assets/register.svg","alt","",1,"image"],["formCorreoEnviado",""],[1,"sign-up-form",3,"formGroup","ngSubmit"],["autocomplete","off","matInput","","placeholder","pat@example.com","formControlName","email","required","",1,"focus:ring-transparent"],["type","submit","value","Enviar email",1,"btn"],[1,"sign-up-form","flex","flex-col","justify-center","items-center"]],template:function(t,o){if(1&t&&(n.TgZ(0,"div",0,1)(2,"div",2)(3,"div",3)(4,"form",4),n.NdJ("ngSubmit",function(){return o.login()}),n.TgZ(5,"h2",5),n._uU(6,"Iniciar sesi\xf3n"),n.qZA(),n.TgZ(7,"div",6)(8,"mat-form-field",7)(9,"mat-label"),n._uU(10,"Introduce tu email"),n.qZA(),n._UZ(11,"input",8),n.YNc(12,M,2,1,"mat-error",9),n.qZA()(),n.TgZ(13,"div",6)(14,"mat-form-field",7)(15,"mat-label"),n._uU(16,"Introduce tu contrase\xf1a"),n.qZA(),n._UZ(17,"input",10),n.TgZ(18,"button",11),n.NdJ("click",function(){return o.hidePassword=!o.hidePassword}),n.TgZ(19,"mat-icon"),n._uU(20),n.qZA()(),n.YNc(21,O,2,1,"mat-error",9),n.qZA()(),n.TgZ(22,"p",12),n._uU(23),n.qZA(),n._UZ(24,"input",13),n.qZA(),n.YNc(25,w,10,2,"form",14),n.qZA()(),n.TgZ(26,"div",15)(27,"div",16)(28,"div",17),n._UZ(29,"img",18),n.TgZ(30,"h1"),n._uU(31,"Gestirediel"),n.qZA(),n.TgZ(32,"h3"),n._uU(33,"\xbfNo te acuerdas de tu contrase\xf1a?"),n.qZA(),n.TgZ(34,"button",19),n.NdJ("click",function(){return o.signUpMode()}),n._uU(35," Cambiar contrase\xf1a "),n.qZA()(),n._UZ(36,"img",20),n.qZA(),n.TgZ(37,"div",21)(38,"div",17),n._UZ(39,"img",18),n.TgZ(40,"h1"),n._uU(41,"Gestirediel"),n.qZA(),n.TgZ(42,"h3"),n._uU(43,"\xbfYa tienes cuenta?"),n.qZA(),n.TgZ(44,"button",19),n.NdJ("click",function(){return o.signInMode()}),n._uU(45," Iniciar sesi\xf3n "),n.qZA()(),n._UZ(46,"img",22),n.qZA()()(),n.YNc(47,b,5,0,"ng-template",null,23,n.W1O)),2&t){const r=n.MAs(48);n.xp6(4),n.Q6J("formGroup",o.formLogin),n.xp6(8),n.Q6J("ngIf",o.formLogin.controls.email.invalid),n.xp6(5),n.Q6J("type",o.hidePassword?"password":"text"),n.xp6(1),n.uIk("aria-label","Hide password")("aria-pressed",o.hidePassword),n.xp6(2),n.Oqu(o.hidePassword?"visibility_off":"visibility"),n.xp6(1),n.Q6J("ngIf",o.formLogin.controls.password.invalid),n.xp6(2),n.Oqu(o.errorMsg),n.xp6(2),n.Q6J("ngIf",!o.correoEnviado)("ngIfElse",r)}},directives:[i._Y,i.JL,i.sg,c.KE,c.hX,f.Nt,i.Fj,i.JJ,i.u,i.Q7,m.O5,c.TO,h.lW,c.R9,_.Hw],styles:['@import"https://fonts.googleapis.com/css2?family=Poppins:wght@200;300;400;500;600;700;800&display=swap";body[_ngcontent-%COMP%], input[_ngcontent-%COMP%]{font-family:Poppins,sans-serif}.logo[_ngcontent-%COMP%]{filter:drop-shadow(5px 5px 5px rgba(24,19,19,.5))}.container[_ngcontent-%COMP%]{position:relative;background-color:#fff;min-height:100vh;overflow:hidden;max-width:100%}.forms-container[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;left:0}.signin-signup[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translate(-50%,-50%);left:75%;width:50%;transition:1s .7s ease-in-out;display:grid;grid-template-columns:1fr;z-index:5}form[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column;padding:0rem 5rem;transition:all .2s .7s;overflow:hidden;grid-column:1 / 2;grid-row:1 / 2}form.sign-up-form[_ngcontent-%COMP%]{opacity:0;z-index:1}form.sign-in-form[_ngcontent-%COMP%]{z-index:2}.title[_ngcontent-%COMP%]{font-size:2.2rem;color:#444;margin-bottom:10px}.input-field[_ngcontent-%COMP%]{max-width:380px;width:100%;margin:15px 0;height:55px;border-radius:55px;padding:0 .4rem;position:relative}.input-field[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{text-align:center;line-height:55px;color:#acacac;transition:.5s;font-size:1.1rem}.input-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:none;outline:none;border:none;line-height:1;font-weight:600;font-size:1.1rem;color:#333}.input-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#aaa;font-weight:500}.social-text[_ngcontent-%COMP%]{padding:.7rem 0;font-size:1rem}.social-media[_ngcontent-%COMP%]{display:flex;justify-content:center}.social-icon[_ngcontent-%COMP%]{height:46px;width:46px;display:flex;justify-content:center;align-items:center;margin:0 .45rem;color:#333;border-radius:50%;border:1px solid #333;text-decoration:none;font-size:1.1rem;transition:.3s}.social-icon[_ngcontent-%COMP%]:hover{color:#4481eb;border-color:#4481eb}.btn[_ngcontent-%COMP%]{width:300px;background-color:#5995fd;border:none;outline:none;height:49px;border-radius:49px;color:#fff;text-transform:uppercase;font-weight:600;margin:10px 0;cursor:pointer;transition:.5s}.btn[_ngcontent-%COMP%]:hover{background-color:#4d84e2}.panels-container[_ngcontent-%COMP%]{position:absolute;height:100%;width:100%;top:0;left:0;display:grid;grid-template-columns:repeat(2,1fr)}.container[_ngcontent-%COMP%]:before{content:"";position:absolute;height:2000px;width:2000px;top:-10%;right:48%;transform:translateY(-50%);background-image:linear-gradient(-45deg,#4481eb 0%,#04befe 100%);transition:1.8s ease-in-out;border-radius:50%;z-index:6}.image[_ngcontent-%COMP%]{width:100%;transition:transform 1.1s ease-in-out;transition-delay:.4s}.panel[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;justify-content:space-around;text-align:center;z-index:6}.left-panel[_ngcontent-%COMP%]{pointer-events:all;padding:3rem 17% 2rem 12%}.right-panel[_ngcontent-%COMP%]{pointer-events:none;padding:3rem 12% 2rem 17%}.panel[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{color:#fff;transition:transform .9s ease-in-out;transition-delay:.6s}.panel[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:600;line-height:1;font-size:1.5rem}.panel[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.95rem;padding:.7rem 0}.btn.transparent[_ngcontent-%COMP%]{margin:0;background:none;border:2px solid #fff;width:200px;height:41px;font-weight:600;font-size:.8rem}.right-panel[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%], .right-panel[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{transform:translate(800px)}.container.sign-up-mode[_ngcontent-%COMP%]:before{transform:translate(100%,-50%);right:52%}.container.sign-up-mode[_ngcontent-%COMP%]   .left-panel[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%], .container.sign-up-mode[_ngcontent-%COMP%]   .left-panel[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{transform:translate(-800px)}.container.sign-up-mode[_ngcontent-%COMP%]   .signin-signup[_ngcontent-%COMP%]{left:25%}.container.sign-up-mode[_ngcontent-%COMP%]   form.sign-up-form[_ngcontent-%COMP%]{opacity:1;z-index:2}.container.sign-up-mode[_ngcontent-%COMP%]   form.sign-in-form[_ngcontent-%COMP%]{opacity:0;z-index:1}.container.sign-up-mode[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%], .container.sign-up-mode[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{transform:translate(0)}.container.sign-up-mode[_ngcontent-%COMP%]   .left-panel[_ngcontent-%COMP%]{pointer-events:none}.container.sign-up-mode[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]{pointer-events:all}@media (max-width: 870px){.container[_ngcontent-%COMP%]{min-height:800px;height:100vh}.signin-signup[_ngcontent-%COMP%]{width:100%;top:95%;transform:translate(-50%,-100%);transition:1s .8s ease-in-out}.signin-signup[_ngcontent-%COMP%], .container.sign-up-mode[_ngcontent-%COMP%]   .signin-signup[_ngcontent-%COMP%]{left:50%}.panels-container[_ngcontent-%COMP%]{grid-template-columns:1fr;grid-template-rows:1fr 2fr 1fr}.panel[_ngcontent-%COMP%]{flex-direction:row;justify-content:space-around;align-items:center;padding:2.5rem 8%;grid-column:1 / 2}.right-panel[_ngcontent-%COMP%]{grid-row:3 / 4}.left-panel[_ngcontent-%COMP%]{grid-row:1 / 2}.image[_ngcontent-%COMP%]{width:200px;transition:transform .9s ease-in-out;transition-delay:.6s}.panel[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding-right:15%;transition:transform .9s ease-in-out;transition-delay:.8s}.panel[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.2rem}.panel[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.7rem;padding:.5rem 0}.btn.transparent[_ngcontent-%COMP%]{width:200px;height:35px;font-size:.7rem}.container[_ngcontent-%COMP%]:before{width:1500px;height:1500px;transform:translate(-50%);left:30%;bottom:68%;right:initial;top:initial;transition:2s ease-in-out}.container.sign-up-mode[_ngcontent-%COMP%]:before{transform:translate(-50%,100%);bottom:32%;right:initial}.container.sign-up-mode[_ngcontent-%COMP%]   .left-panel[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%], .container.sign-up-mode[_ngcontent-%COMP%]   .left-panel[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{transform:translateY(-300px)}.container.sign-up-mode[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%], .container.sign-up-mode[_ngcontent-%COMP%]   .right-panel[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{transform:translateY(0)}.right-panel[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%], .right-panel[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{transform:translateY(300px)}.container.sign-up-mode[_ngcontent-%COMP%]   .signin-signup[_ngcontent-%COMP%]{top:5%;transform:translate(-50%)}}@media (max-width: 570px){form[_ngcontent-%COMP%]{padding:0 1.5rem}.image[_ngcontent-%COMP%]{display:none}.panel[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:.5rem 1rem}.left-panel[_ngcontent-%COMP%]{padding:0}.right-panel[_ngcontent-%COMP%]{padding:.7rem}.container[_ngcontent-%COMP%]{padding:1.5rem}.container[_ngcontent-%COMP%]:before{bottom:72%;left:50%}.container.sign-up-mode[_ngcontent-%COMP%]:before{bottom:28%;left:50%}}']}),e})()},{path:"new-password/:token",component:(()=>{class e{constructor(t,o,r,g){this.fb=t,this.authService=o,this.router=r,this.route=g,this.formPassword=this.fb.group({password:["",[i.kI.required,i.kI.minLength(6),i.kI.maxLength(20)]]}),this.token="",this.errorPassword="Debe tener al menos 6 caracteres",this.hidePassword=!0}ngOnInit(){}updatePass(){this.authService.newPassword(this.formPassword.value.password,this.route.snapshot.paramMap.get("token")).subscribe(t=>{t?(p().fire({title:"Actualizado",text:"Se ha actualizado la contrase\xf1a",icon:"success",showConfirmButton:!1,timer:1500}),this.router.navigate(["/login"])):p().fire({title:"Error",text:"No se ha podido actualizar la contrase\xf1a",icon:"error",confirmButtonText:"Ok"})})}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(i.qu),n.Y36(u.e),n.Y36(l.F0),n.Y36(l.gz))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-new-password"]],decls:17,vars:6,consts:[[1,"mx-auto","w-full","h-full","flex","justify-center","items-center"],[1,"sign-up-form",3,"formGroup","ngSubmit"],["src","/assets/Gestirediel.png",1,"w-20","mx-auto","logo"],[1,"title"],[1,"input-field"],["appearance","fill",1,"w-full"],["autocomplete","off","formControlName","password","matInput","","required","",1,"focus:ring-transparent",3,"type"],["type","button","mat-icon-button","","matSuffix","",3,"click"],[4,"ngIf"],["type","submit","value","Cambiar contrase\xf1a",1,"btn"]],template:function(t,o){1&t&&(n.TgZ(0,"div",0)(1,"form",1),n.NdJ("ngSubmit",function(){return o.updatePass()}),n._UZ(2,"img",2),n.TgZ(3,"h1"),n._uU(4,"Gestirediel"),n.qZA(),n.TgZ(5,"h2",3),n._uU(6,"Cambiar contrase\xf1a"),n.qZA(),n.TgZ(7,"div",4)(8,"mat-form-field",5)(9,"mat-label"),n._uU(10,"Introduce tu contrase\xf1a"),n.qZA(),n._UZ(11,"input",6),n.TgZ(12,"button",7),n.NdJ("click",function(){return o.hidePassword=!o.hidePassword}),n.TgZ(13,"mat-icon"),n._uU(14),n.qZA()(),n.YNc(15,Z,2,1,"mat-error",8),n.qZA()(),n._UZ(16,"input",9),n.qZA()()),2&t&&(n.xp6(1),n.Q6J("formGroup",o.formPassword),n.xp6(10),n.Q6J("type",o.hidePassword?"password":"text"),n.xp6(1),n.uIk("aria-label","Hide password")("aria-pressed",o.hidePassword),n.xp6(2),n.Oqu(o.hidePassword?"visibility_off":"visibility"),n.xp6(1),n.Q6J("ngIf",o.formPassword.controls.password.invalid))},directives:[i._Y,i.JL,i.sg,c.KE,c.hX,i.Fj,f.Nt,i.JJ,i.u,i.Q7,h.lW,c.R9,_.Hw,m.O5,c.TO],styles:['@import"https://fonts.googleapis.com/css2?family=Poppins:wght@200;300;400;500;600;700;800&display=swap";body[_ngcontent-%COMP%], input[_ngcontent-%COMP%]{font-family:Poppins,sans-serif}.logo[_ngcontent-%COMP%]{filter:drop-shadow(5px 5px 5px rgba(24,19,19,.5))}form[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column;padding:0rem 5rem;transition:all .2s .7s;overflow:hidden;grid-column:1 / 2;grid-row:1 / 2}.input-field[_ngcontent-%COMP%]{max-width:380px;width:100%;margin:15px 0;height:55px;border-radius:55px;padding:0 .4rem;position:relative}.input-field[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{text-align:center;line-height:55px;color:#acacac;transition:.5s;font-size:1.1rem}.input-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:none;outline:none;border:none;line-height:1;font-weight:600;font-size:1.1rem;color:#333}.input-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#aaa;font-weight:500}.title[_ngcontent-%COMP%]{font-size:2.2rem;color:#444;margin-bottom:10px}.btn[_ngcontent-%COMP%]{width:300px;background-color:#5995fd;border:none;outline:none;height:49px;border-radius:49px;color:#fff;text-transform:uppercase;font-weight:600;margin:10px 0;cursor:pointer;transition:.5s}.btn[_ngcontent-%COMP%]:hover{background-color:#4d84e2}.btn.transparent[_ngcontent-%COMP%]{margin:0;background:none;border:2px solid #fff;width:200px;height:41px;font-weight:600;font-size:.8rem}@media (max-width: 570px){form[_ngcontent-%COMP%]{padding:0 1.5rem}}']}),e})()},{path:"**",redirectTo:"login"}];let T=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[[l.Bz.forChild(y)],l.Bz]}),e})()}}]);